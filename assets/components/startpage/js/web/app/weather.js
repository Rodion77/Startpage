define(["app","autocomplete"],function(t,e){"use strict";jQuery=$,t.Weather={init:function(e){$(document).on("click","#city-trigger",function(){t.Weather.open()}),$(document).on("reset","#city-form",function(){t.Weather.close()}),$(document).on("click","#weather-update",function(){t.Weather.update()}),setInterval(function(){t.Weather.update()},6e5),this.update(e)},open:function(){$(".weather-wrapper").addClass("hidden"),$("#city-form").removeClass("hidden").find("input").focus(),e({Url:t.action_url+"?action=weather/search"},"#city-form-input")},close:function(){$("#city-form").addClass("hidden"),$(".weather-wrapper").removeClass("hidden")},update:function(e){var n=$("#weather-update");_.isEmpty(e)&&(e=n.data("id")),n.hasClass("fa-spin")||(n.addClass("fa-spin"),$.post(t.action_url,{action:"weather/update",city:e},function(t){n.removeClass("fa-spin"),_.isEmpty(t.object.content)||$("#weather").html(t.object.content)},"json"))},formCallback:function(t){_.isEmpty(t.content)||$("#weather").html(t.content)}}});