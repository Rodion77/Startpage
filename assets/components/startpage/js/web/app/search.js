define(["app"],function(t){"use strict";jQuery=$,t.Search={init:function(e){this.$wrapper=$("#search"),this.$crawlers=this.$wrapper.find(".dropdown-menu"),this.$trigger=$("#dropdown-trigger"),this.$form=$("#search-form"),this.$input=this.$form.find(".search"),this.$submit=this.$form.find('[type="submit"]'),this.$reset=this.$form.find('[type="reset"]'),$(document).on("click","#search .dropdown-item",function(){t.Search.select($(this).attr("id").replace("search-",""),!0)});var i=this;this.$input.on("keyup",function(){$(this).val().length?(i.$reset.removeClass("hidden"),i.$submit.removeClass("alone")):(i.$reset.addClass("hidden"),i.$submit.addClass("alone"))}).focus(),this.$form.on("submit",function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/i)||setTimeout(function(){i.$form.trigger("reset")},10)}).on("reset",function(){i.$reset.addClass("hidden"),i.$submit.addClass("alone")}),void 0!=e&&this.select(e)},select:function(e,i){var s=$("#search-"+e);this.$form.attr("action",s.data("url")),this.$form.find("input").attr("name",s.data("q")).focus(),this.$trigger.html(s.html().trim()),this.$crawlers.find(".hidden").removeClass("hidden"),s.addClass("hidden"),void 0!=i&&$.post(t.action_url,{action:"search/select",crawler:e},null,"json")}}});